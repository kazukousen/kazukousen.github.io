<!DOCTYPE html>
<html lang="ja">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <title>PelicanとGitHub-pagesでブログ開設</title>

        <!-- Bootstrap Core CSS -->
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/darkly.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="Python3系の環境構築をまとめた. 静的サイトジェネレータPelicanでGitHub-pagesデビューした.">

        <meta name="author" content="one_meets_seven">

        <meta name="tags" content="pelican">
        <meta name="tags" content="GitHub">
        <meta name="tags" content="python">

	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="メモとかいろいろ">

	<meta property="og:type" content="article">
            <meta property="article:author" content="/author/one_meets_seven.html">
	<meta property="og:url" content="/python-pelican-install.html">
	<meta property="og:title" content="PelicanとGitHub-pagesでブログ開設">
	<meta property="article:published_time" content="2017-02-11 00:00:00+09:00">
            <meta property="og:description" content="Python3系の環境構築をまとめた. 静的サイトジェネレータPelicanでGitHub-pagesデビューした.">

            <meta property="og:image" content="/theme/images/post-bg.jpg">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">メモとかいろいろ</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('/theme/images/post-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>PelicanとGitHub-pagesでブログ開設</h1>
                        <span class="meta">Posted by
                                <a href="/author/one_meets_seven.html">one_meets_seven</a>
                             on 土 11 2月 2017
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <h1>PelicanとGitHub-pagesでブログ開設</h1>
<p>GitHub-pagesを使ってみたかった<br>
HTML5, CSS, JavaScriptが動くということで静的サイトジェネレータを使うことにした  </p>
<p>どうせならPython製の<a href="http://docs.getpelican.com/en/stable/">Pelican</a>
Markdownでモダンな静的サイトでも作ることにした  </p>
<h2>GitHub Pages</h2>
<p>まずは自分のGitHubアカウントで<br>
<code>Repository name</code>に<code>username.github.io</code>と入力して新規作成<br>
つくったらとりあえず今は放っておく  </p>
<h2>pythonで環境構築</h2>
<p>怖がる必要はない. python3系を構築しましょう.  </p>
<ul>
<li>pyenvでバージョン管理</li>
<li>virtualenvでプロジェクト管理</li>
</ul>
<p>の手段をとる.  </p>
<h3>pythonにおけるプロジェクト管理</h3>
<p>プロジェクトディレクトリを作ってその中にvirtualenvの環境づくり.<br>
virtualenvはpipでインストールすればいいらしい.<br>
python3系にはvenvがあるらしいが結局みんなvirtualenvにお世話になってるぽい.  </p>
<div class="highlight"><pre><span></span>$ pip install virtualenv
$ <span class="nb">cd</span> ~
$ mkdir Blog <span class="o">&amp;&amp;</span> <span class="nb">cd</span> Blog
$ virtualenv venv
$ <span class="nb">source</span> venv/bin/activate
<span class="o">(</span>venv<span class="o">)</span>$
</pre></div>


<p><code>venv</code>という名前で環境を管理する.<br>
activateを実行で<code>venv</code>環境に入る.<br>
抜ける時は  </p>
<div class="highlight"><pre><span></span><span class="o">(</span>venv<span class="o">)</span>$ deactivate
$
</pre></div>


<p>作った環境でモジュールたちをpipでインストールしまくっても<br>
グローバル環境が汚れずに済む.  </p>
<p><strong>ここから先は(venv)と明記しない.</strong>  </p>
<h2>pelican</h2>
<p>以下をpipで一気にインストール.<br>
<code>requirements.txt</code>  </p>
<div class="highlight"><pre><span></span>% requirements.txt
pelican
Markdown
ghp-import
</pre></div>


<p><code>ghp-import</code>はGitHub-Pagesリポジトリへの遠隔操作をいい感じに楽にしてくれる.  </p>
<div class="highlight"><pre><span></span>$ pip install -r requirements.txt
$ pip list
</pre></div>


<p><code>pelican-quickstart</code>コマンドでpelicanの雛形をつくる.<br>
いろいろ対話形式で設定をすることになる.  </p>
<div class="highlight"><pre><span></span>&gt; Where <span class="k">do</span> you want to create your new web site? <span class="o">[</span>.<span class="o">]</span> .
&gt; What will be the title of this web site? your blog
e Who will be the author of this web site? yourname
&gt; What will be the default language of this web site? <span class="o">[</span>en<span class="o">]</span> ja
&gt; TimeZone的なこと <span class="o">[</span>Europe/Paris<span class="o">]</span> Asia/Tokyo
&gt; Do you want to specify a URL prefix? e.g., http://example.com   <span class="o">(</span>Y/n<span class="o">)</span> Y
&gt; What is your URL prefix? <span class="o">(</span>see above example<span class="p">;</span> no trailing slash<span class="o">)</span> https://yourname.github.io
&gt; Do you want to <span class="nb">enable</span> article pagination? <span class="o">(</span>Y/n<span class="o">)</span> Y
&gt; How many articles per page <span class="k">do</span> you want? <span class="o">[</span><span class="m">10</span><span class="o">]</span> <span class="m">10</span>
&gt; Do you want to generate a Fabfile/Makefile to automate generation and publishing? <span class="o">(</span>Y/n<span class="o">)</span> Y
&gt; Do you want an auto-reload <span class="p">&amp;</span> simpleHTTP script to assist with theme and site development? <span class="o">(</span>Y/n<span class="o">)</span> Y
&gt; Do you want to upload your website using FTP? <span class="o">(</span>y/N<span class="o">)</span> N
&gt; Do you want to upload your website using SSH? <span class="o">(</span>y/N<span class="o">)</span> N
&gt; Do you want to upload your website using Dropbox? <span class="o">(</span>y/N<span class="o">)</span> N
&gt; Do you want to upload your website using S3? <span class="o">(</span>y/N<span class="o">)</span> N
&gt; Do you want to upload your website using Rackspace Cloud Files? <span class="o">(</span>y/N<span class="o">)</span> N
&gt; Do you want to upload your website using GitHub Pages? <span class="o">(</span>y/N<span class="o">)</span> y
</pre></div>


<h2>Markdown</h2>
<p>早速記事を書いてみる.<br>
<code>content</code>ディレクトリ下にmdファイルを作る  </p>
<div class="highlight"><pre><span></span>% 0210first_post.md
Title: ブログタイトル
Date: 2017-02-10 23:00
Category:   Memo
Tags: pelican, python
Slug: 0210first_post
Author: yourname
Summary: ブログの要約


<span class="gh">#</span> ブログのタイトル 

<span class="k">-</span> List
<span class="k">-</span> List
<span class="k">-</span> List
</pre></div>


<p><code>make html</code>でHTMLにコンパイルし<code>make serve</code>でローカル環境で確認.<br>
HTMLは<code>output</code>ディレクトリの中に作成される.  </p>
<div class="highlight"><pre><span></span>$ make html
$ make serve
</pre></div>


<p><code>http://localhost:8000</code>にアクセス  </p>
<h2>GitHub PagesにPush</h2>
<div class="highlight"><pre><span></span>$ git init
</pre></div>


<p><code>.gitignore</code>でpushを除外するファイルを記述する.  </p>
<div class="highlight"><pre><span></span><span class="c1">## Pelican</span>
<span class="n">output</span><span class="o">/*</span>
<span class="o">*.</span><span class="n">pid</span>

<span class="c1">## Python</span>
<span class="o">*.</span><span class="n">py</span><span class="o">[</span><span class="n">cod</span><span class="o">]</span>

<span class="c1">## Mac OS X</span>
<span class="o">.</span><span class="n">DS_Store</span>
<span class="o">.</span><span class="n n-Operator">*</span><span class="o">~</span>
<span class="o">*~</span>
</pre></div>


<p>push  </p>
<div class="highlight"><pre><span></span>$ ghp-import output
$ git push https://github.com/yourname/yourname.github.io.git gh-pages:master
</pre></div>


<p><code>https://yourname.github.io</code>に反映されるはず.<br>
(少しラグあり)  </p>
<h2>おまけメモ</h2>
<h3>テーマ変更</h3>
<p>テーマを変更してみる.<br>
<a href="http://www.pelicanthemes.com">Pelican Themes</a></p>
<div class="highlight"><pre><span></span>$ mkdir themes <span class="o">&amp;&amp;</span> <span class="nb">cd</span> themes
$ git clone https://github.com/gilsondev/pelican-clean-blog
$ <span class="nb">cd</span> ..
</pre></div>


<p>テーマを導入  </p>
<div class="highlight"><pre><span></span>$ pelican-themes -i themes/pelican-clean-blog
</pre></div>


<p>入ったか確認  </p>
<div class="highlight"><pre><span></span>$ pelican-themes -l
</pre></div>


<p>設定ファイル<code>pelicanconf.py</code>に以下を追加.  </p>
<div class="highlight"><pre><span></span><span class="n">THEME</span> <span class="o">=</span> <span class="s1">&#39;pelican-clean-blog&#39;</span>
</pre></div>


<h3>プラグインを導入</h3>
<div class="highlight"><pre><span></span>$ mkdir plugins <span class="o">&amp;&amp;</span> <span class="nb">cd</span> plugins
$ git clone https://github.com/getpelican/pelican-plugins.git
$ <span class="nb">cd</span> ..
</pre></div>


<h4>MathJax</h4>
<p>LaTeXみたいな数式を書きたい<br>
依存モジュールをインストール  </p>
<div class="highlight"><pre><span></span>$ pip install typogrify
</pre></div>


<p><code>pelicanconf.py</code>を書き換える.  </p>
<div class="highlight"><pre><span></span><span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;render_math&#39;</span><span class="p">]</span>
</pre></div>


<p>これで使えるようになる.  </p>
<div class="highlight"><pre><span></span>$$
{\mathcal L}(x) = -{\rm KL}[q(z|x)||p(z)] + {\mathbb E}_{q(z|x)}[p(x|z)]
$$
</pre></div>


<div class="math">$$
{\mathcal L}(x) = -{\rm KL}[q(z|x)||p(z)] + {\mathbb E}_{q(z|x)}[p(x|z)]
$$</div>
<h4>Jupyter Notebook</h4>
<p>なんとJupyterのセルも貼り付けるプラグインがある<br>
依存モジュールをインストール  </p>
<div class="highlight"><pre><span></span>$ pip install ipython jupyter
</pre></div>


<p>つぎに<code>pelicanconf.py</code>を書き加える  </p>
<div class="highlight"><pre><span></span><span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;liquid_tags.notebook&#39;</span><span class="p">,</span> <span class="s1">&#39;render_math&#39;</span><span class="p">]</span>
<span class="n">NOTEBOOK_DIR</span> <span class="o">=</span> <span class="s1">&#39;notebooks&#39;</span>
</pre></div>


<div class="highlight"><pre><span></span>{% notebook yourfilename.ipynb cells[0:12] %}
</pre></div>


<p>指定したcellの分だけ表示できる.  </p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
    </article>

        <div class="tags">
            <p>tags: <a href="/tag/pelican.html">pelican</a>, <a href="/tag/github.html">GitHub</a>, <a href="/tag/python.html">python</a></p>
        </div>

    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="https://twitter.com/one_meets_seven">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/kazukousen">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog powered by <a href="http://getpelican.com">Pelican</a>,
    which takes great advantage of <a href="http://python.org">Python</a>.
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/theme/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="/theme/js/clean-blog.min.js"></script>

</body>

</html>